# `packages/`

## 概要

このディレクトリには以下に該当する自作ツールのソースコードが配置されます。

- Bash/Zsh スクリプトでは複雑なもの
- なんらかのランタイムを必要とするが、プロジェクトによってランタイムが固定されており、スクリプトのシェバンを `#!/usr/bin/env -S <runtime>` とすると、意図しないランタイムで実行される可能性があるもの
- 独立したリポジトリにするほどではないもの

各自作ツールは、後述するディレクトリ配置と `install` タスクの定義に従ってさえいれば、ランタイム・ビルド方法・依存関係・ホームディレクトリ以下の配置に関しては自由に選択できるものとします。

## 基本的な自作ツールのディレクトリ配置

```
<repository-root>/
  packages/
    CLAUDE.md     # このファイル
    <tool-name>/
      src/        # ソースコード
      mise.toml   # 使用ランタイムや "install" タスクの定義
```

## `install` タスク

各自作ツールの `mise.toml` には `install` タスクを定義します。 `install` タスクには主に以下の内容が含まれますが、これらに限定されません:

- ランタイムのインストール
- 依存関係のインストール
- ビルド
- ビルド成果物のホームディレクトリ以下への配置
  - e.g. `~/.844196/bin`, `~/.844196/libexec`

各自作ツールの `install` タスクは chezmoi ライフサイクルスクリプトから呼び出されます。
