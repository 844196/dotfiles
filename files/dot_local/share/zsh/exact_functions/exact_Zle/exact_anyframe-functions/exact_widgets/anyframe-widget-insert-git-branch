# vim: set ft=zsh:

tput cub 9999

anyframe-source-git-branch \
  | SHELL==$ZSH_NAME anyframe-selector-fzf '' \
    --multi \
    --delimiter '│ ' \
    --nth 2.. \
    --scheme path \
    --preview 'git --no-pager graph -n $(( FZF_PREVIEW_LINES / 2 )) $(cut -d " " -f 1,1 <<< {2..}) | emojify' \
  | sed 's/^.*│ //' \
  | cut -d ' ' -f 1,1 \
  | anyframe-action-insert

zle .reset-prompt
