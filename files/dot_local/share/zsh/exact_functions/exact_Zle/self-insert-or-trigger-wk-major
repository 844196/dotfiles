if [[ -n $BUFFER ]]; then
  zle self-insert
else
  echo -n $'\x1b[?25l\x1b[0`' >$TTY # Avoid cursor flickering

  local reply
  zle _wk_widget_major

  case "${reply[(rb:2:)trigger:*]}" in
    trigger:COMPLETE)
      zle fzf-completion-or-expand-or-complete
      ;;
  esac
fi
