---
name: writing-agent-context-docs
description: AIエージェントがコードベースを理解・探索するためのドキュメント（CLAUDE.md、アーキテクチャドキュメント等）の作成・更新時に適用する。
user-invocable: false
---

# エージェント向けコンテキストドキュメントの作成ガイド

## 原則1: エージェントの探索を助ける抽象度で記述する

「コードを読まなくても全体像と探索の起点を把握できる」レベルで記述する。

**記述する内容:**
- アーキテクチャの全体像（レイヤー構成、コンポーネント間の関係）
- 処理フロー（リクエストライフサイクル等のシーケンス）
- 構成要素の一覧と各要素の役割（1行説明レベル）
- 設定・環境変数・外部依存の一覧
- 設計判断の意図（Why）— コードからは読み取れない背景や制約
- 具体的な入出力例 — エージェントが動作を推論するための手がかり

実装の詳細はコードおよびテストへの参照で誘導する（例: 「詳細は `src/xxx.ts` を参照」）。
コードを読めば自明なロジックの説明や、コードの転記は行わない。

## 原則2: 階層化された参照体系を維持する

情報は一箇所に記述し、重複させない。各階層で適切な詳細度を保ち、より深い詳細は下位のドキュメントまたはコード自体に委譲する。

```
CLAUDE.md（プロジェクトルート）
  → 全体概要、技術スタック、共通ルール
  → 各パッケージの CLAUDE.md への参照

packages/<pkg>/CLAUDE.md
  → パッケージの構成、主要な型、依存関係、開発コマンド
  → docs/ への参照

docs/<topic>.md
  → アーキテクチャ詳細、処理フロー、設計判断の背景
  → ソースコードへの参照
```
